<!-- Nav bar -->
<div class="offcanvas offcanvas-start show text-bg-dark" style="width: 15%;">
    <div class="offcanvas-header">
      <h1 class="offcanvas-title">Dashboard</h1>
    </div>

    <div class="offcanvas-body">
        <div class="d-grid gap-5">
          <button type="button" class="btn btn-outline-success" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
            Add new task
          </button>
          <ul class="list-group">
            <li class="list-group-item list-group-item-{{task.is_done == 'true' ? 'success' : 'warning'}}" 
            *ngFor="let task of taskList">{{task.task_name}}</li>
          </ul>
        </div>
    </div>

    <p style="margin-left: 5%;">{{user_email}}</p>
    <div class="offcanvas-footer" style="margin-bottom: 15%; margin-left: 15%;">
        <button type="button" class="btn btn-outline-light" (click)="logout()">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-right" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"/>
                <path fill-rule="evenodd" d="M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"/>
              </svg>
              Sign Out
        </button>
    </div>
</div>

<!-- Modal for adding a new task -->
<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="staticBackdropLabel">Add new task</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form id="addForm">
          <div class="mb-3">
            <label for="exampleInputDate" class="form-label">Date</label>
            <input type="date" class="form-control" id="exampleInputDate" name="date" [(ngModel)]="date">
          </div>
          <div class="mb-3">
            <label for="exampleInputTime" class="form-label">Time</label>
            <input type="time" class="form-control" id="exampleInputTime" name="time" [(ngModel)]="time">
          </div>
          <div class="mb-3">
            <label for="exampleInputName" class="form-label">Title</label>
            <input type="text" class="form-control" id="exampleInputTitle" name="task_name" [(ngModel)]="task_name">
          </div>
          <div class="mb-3">
            <label for="exampleInputDescription" class="form-label">Description</label>
            <textarea class="form-control" id="exampleInputDescription" rows="3" name="description" [(ngModel)]="description"></textarea>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" id="addForm" class="btn btn-success" (click)="addTask()">Add</button>
      </div>
    </div>
  </div>
</div>

<!-- To do list -->
<div class="card" style="margin-left: 20%; margin-right: 20%; margin-top: 1%;">
  <div class="card-body">
    <h1>TO DO List</h1>

    <div class="accordion" id="accordionPanelsStayOpenExample">
      <app-task *ngFor="let task of taskList; let i = index" [task]="task" [index]="i"></app-task>
    </div>
  </div>
</div>